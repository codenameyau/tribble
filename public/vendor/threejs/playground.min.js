/*!
 * playground.js - v1.0.0
 * MIT License (c) 2015
 * https://github.com/codenameyau/playground
 */
function Playground(){this.version="v1.0.0",this.clock=null,this.scene=null,this.renderer=null,this.camera=null,this.controls=null,this._initializeSettings(),this._intializeKeycodes(),this._initializeClock(),this._initializeScene(),this._initializeRenderer(),this._initializeCamera(),this._initializeControls(),this._initializeHUD(),this._initializeEventListeners(),this.updateScene()}Playground.prototype._initializeSettings=function(){this.settings={meta:{dom:"threejs-canvas"},renderer:{antialias:!1},scene:{grid:!1},camera:{fov:45,near:1,far:1e3,zoom:{x:0,y:20,z:50}},controls:{enabled:!0,userPan:!1,userPanSpeed:.5,minDistance:10,maxDistance:200,maxPolarAngle:Math.PI/180*85}}},Playground.prototype._intializeKeycodes=function(){this.keycodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,caps:20,esc:27,space:32,end:35,home:36,left:37,up:38,right:39,down:40,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90}},Playground.prototype._initializeClock=function(){this.clock=new THREE.Clock,this.clock.delta=this.clock.getDelta()},Playground.prototype._initializeScene=function(){this.scene=new THREE.Scene},Playground.prototype._initializeRenderer=function(){this.renderer=new THREE.WebGLRenderer(this.settings.renderer),this.renderer.setSize(window.innerWidth,window.innerHeight),this.utils.addToDOM(this.settings.meta.dom,this.renderer.domElement),this.renderer.running=!0},Playground.prototype._initializeCamera=function(){var e=this.settings.camera,t=window.innerWidth/window.innerHeight;this.camera=new THREE.PerspectiveCamera(e.fov,t,e.near,e.far),this.camera.position.set(e.zoom.x,e.zoom.y,e.zoom.z),this.camera.lookAt(this.scene.position),this.scene.add(this.camera)},Playground.prototype._initializeControls=function(){var e=this.settings.controls;this.controls=new THREE.OrbitControls(this.camera);for(var t in e)this.controls[t]=e[t]},Playground.prototype._initializeHUD=function(){this.HUD={},this.enablePausedHUD()},Playground.prototype._initializeEventListeners=function(){window.addEventListener("resize",this.resizeWindow.bind(this),!1),window.addEventListener("focus",this.resumeClock.bind(this),!1),window.addEventListener("blur",this.pauseClock.bind(this),!1),window.addEventListener("keydown",this.keyboardInput.bind(this),!1)},Playground.prototype._callback=function(e){e&&"function"==typeof e&&e.bind(this)()},Playground.prototype.renderScene=function(){this.renderer.render(this.scene,this.camera)},Playground.prototype.updateScene=function(){this.renderer.running&&(window.requestAnimationFrame(this.updateScene.bind(this)),this.controls.update(),this.renderScene())},Playground.prototype.resizeWindow=function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},Playground.prototype.resumeClock=function(){this.clock.start()},Playground.prototype.pauseClock=function(){this.clock.stop()},Playground.prototype.resumeRenderer=function(){this.renderer.running=!0,this.resumeClock(),window.requestAnimationFrame(this.updateScene.bind(this))},Playground.prototype.pauseRenderer=function(){this.renderer.running=!1,this.pauseClock()},Playground.prototype.togglePause=function(){this.renderer.running?(this.HUD.paused.style.display="block",this.controls.enabled=!1,this.pauseRenderer()):(this.HUD.paused.style.display="none",this.controls.enabled=!0,this.resumeRenderer())},Playground.prototype.getKeycode=function(e){return this.keycodes[e]},Playground.prototype.changeSettings=function(e,t){var i=this.settings[e];for(var n in t)i.hasOwnProperty(n)&&(i[n]=t[n])},Playground.prototype.enableGrid=function(e,t,i){e=e||20,t=t||2,i=i||16777215;for(var n=new THREE.Geometry,r=new THREE.LineBasicMaterial({color:i}),o=-e;e>=o;o+=t)n.vertices.push(new THREE.Vector3(-e,0,o)),n.vertices.push(new THREE.Vector3(e,0,o)),n.vertices.push(new THREE.Vector3(o,0,-e)),n.vertices.push(new THREE.Vector3(o,0,e));this.scene.add(new THREE.Line(n,r,THREE.LinePieces)),this.settings.scene.grid=!0},Playground.prototype.loadScene=function(e){this._callback(e)},Playground.prototype.resetCamera=function(e){this._initializeCamera(),this._initializeControls(),this._callback(e)},Playground.prototype.resetScene=function(e){this._initializeScene(),this.resetCamera(),this.settings.scene.grid&&this.enableGrid(),this._callback(e)},Playground.prototype.utils={},Playground.prototype.utils.addToDOM=function(e,t){var i=document.getElementById(e);i.appendChild(t)},Playground.prototype.utils.checkProperty=function(e,t,i){return e&&"undefined"!=typeof e[t]&&(i=e[t]),i},Playground.prototype.utils.degToRad=function(e){return Math.PI/180*e},Playground.prototype.utils.radToDeg=function(e){return 180/Math.PI*e},Playground.prototype.enablePausedHUD=function(){var e=document.createElement("div");e.textContent="Paused",e.style.display="none",e.style.zIndex="100",e.style.width="100%",e.style.height="100%",e.style.textAlign="center",e.style.color="#ffffff",e.style.textTransform="uppercase",e.style.fontSize="32px",e.style.letterSpacing="6px",e.style.position="absolute",e.style.top="0",e.style.padding="20% 0 0 0",e.style.background="rgba(0, 0, 0, 0.5)",this.utils.addToDOM(this.settings.meta.dom,e),this.HUD.paused=e},Playground.prototype.keyboardInput=function(e){switch(e.which){case this.keycodes.space:e.preventDefault(),this.togglePause();break;case this.keycodes.r:e.preventDefault(),this.resetCamera()}};
